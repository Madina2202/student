"use strict";
import { request } from "@umijs/max";
export async function getInitialState() {
  const token = localStorage.getItem("token");
  if (!token) return { isAuthenticated: false };
  try {
    const userInfo = await request("/api/User/Info", { method: "GET" });
    return {
      isAuthenticated: true,
      email: userInfo.email
    };
  } catch {
    localStorage.removeItem("token");
    return { isAuthenticated: false };
  }
}
